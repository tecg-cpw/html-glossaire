(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const t={swipeCardCheckboxID:"hideCards",hideAllDefinitionsBtnID:"hideAllDefinitions",showAllDefinitionsBtnID:"showAllDefinitions",cardClass:"dl-item",cardHideDefinitionClass:"dl-item--hide-definition",cardHideClass:"dl-item--hide",knownClass:"dl-item--known",filterFormSelector:"filter-form",mainNav:".main-nav",mainNavSelector:".main-nav ul li",filterID:"filter",searchID:"search",hideKnownCardCheckboxID:"hideKnownDefinition",knownCardCheckboxSelector:".dl-item dt input[type=checkbox]"},a={touchstartX:0,touchendX:0,minimumMove:100,init(){this.hideKnowncardCheckbox=document.getElementById(t.hideKnownCardCheckboxID),this.swipeCheckbox=document.getElementById(t.swipeCardCheckboxID),this.hideAllDefinitionsBtn=document.getElementById(t.hideAllDefinitionsBtnID),this.showAllDefinitionsBtn=document.getElementById(t.showAllDefinitionsBtnID),this.cards=document.querySelectorAll(`.${t.cardClass}`),this.knownCardCheckboxes=document.querySelectorAll(t.knownCardCheckboxSelector),this.addEventListeners()},hiddeOrShowCard(e){this.touchendX<this.touchstartX?this.touchstartX-this.touchendX>this.minimumMove&&e.classList.add(t.cardHideDefinitionClass):this.touchendX>this.touchstartX&&this.touchendX-this.touchstartX>this.minimumMove&&e.classList.remove(t.cardHideDefinitionClass)},addEventListeners:function(){this.cards.forEach(e=>{e.addEventListener("mousedown",i=>{this.swipeCheckbox.checked&&(this.touchstartX=i.clientX)}),e.addEventListener("touchstart",i=>{this.swipeCheckbox.checked&&(this.touchstartX=i.changedTouches[0].screenX)}),e.addEventListener("mouseup",i=>{this.swipeCheckbox.checked&&(this.touchendX=i.clientX,this.hiddeOrShowCard(i.currentTarget))}),e.addEventListener("touchend",i=>{this.swipeCheckbox.checked&&(this.touchendX=i.changedTouches[0].screenX,this.hiddeOrShowCard(i.currentTarget))})}),this.knownCardCheckboxes.forEach(e=>{e.addEventListener("change",i=>{this.hideKnowncardCheckbox.checked&&(i.currentTarget.checked?i.currentTarget.closest(`.${t.cardClass}`).classList.add(t.knownClass):i.currentTarget.closest(`.${t.cardClass}`).classList.remove(t.knownClass))})}),this.hideAllDefinitionsBtn.addEventListener("click",()=>{this.cards.forEach(e=>{e.classList.add(t.cardHideDefinitionClass)})}),this.showAllDefinitionsBtn.addEventListener("click",()=>{this.cards.forEach(e=>{e.classList.remove(t.cardHideDefinitionClass)})}),this.hideKnowncardCheckbox.addEventListener("change",()=>{this.hideKnowncardCheckbox.checked?document.querySelectorAll(`.${t.cardClass}:not(${t.cardHideClass})`).forEach(e=>{e.querySelector("dt input[type=checkbox]").checked&&e.classList.add(t.knownClass)}):document.querySelectorAll(`.${t.cardClass}`).forEach(e=>{e.classList.remove(t.knownClass)})})}},d={init(){document.body.classList.add("js"),this.cards=document.querySelectorAll(`.${t.cardClass}`),this.searchInput=document.getElementById(t.searchID),this.definitionTermes=document.querySelectorAll("dt"),this.filterSelect=document.getElementById(t.filterID),this.filterForm=document.getElementById(t.filterFormSelector),this.initDataList(),this.initSelection(),this.filterForm.addEventListener("submit",function(e){e.preventDefault()}),this.searchInput.addEventListener("input",()=>{this.filterCards()}),this.filterSelect.addEventListener("input",()=>{this.filterCards()})},filterCards:function(){this.showAllCards(),this.removeAllMarks();const e=this.searchInput.value,i=this.filterSelect.value;this.cards.forEach(n=>{if(i!=="all"&&n.dataset.cat!==i)n.classList.add(t.cardHideClass);else{const o=n.querySelector("dt");e.trim().length>0&&o.innerText.trim().toLowerCase().includes(e.trim().toLowerCase())?o.innerHTML=o.innerHTML.replace(new RegExp(`(>[^<>]*)(${this.escapeRegExp(e)})([^<>]*<)`,"gi"),"$1<mark>$2</mark>$3"):e.trim().length>0&&n.classList.add(t.cardHideClass)}})},escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},showAllCards(){this.cards.forEach(e=>{e.classList.remove(t.cardHideClass)})},removeAllMarks(){this.cards.forEach(e=>{this.removeMarks(e)})},removeMarks:function(e){const i=e.querySelector("dt");i.innerHTML=i.innerHTML.replaceAll("<mark>",""),i.innerHTML=i.innerHTML.replaceAll("</mark>","")},initDataList(){let e='<datalist id="data-termes">';this.cards.forEach(i=>{e+=`<option value="${i.querySelector("dt").innerText}"></option>`}),e+="</datalist>",document.body.insertAdjacentHTML("beforeend",e),this.searchInput.setAttribute("list","data-termes")},initSelection(){let e=[];this.cards.forEach(i=>{const n=i.dataset.cat.trim();n.length>0&&(e.includes(n)||(e.push(n),this.filterSelect.insertAdjacentHTML("beforeend",` <option value="${n}">${n}</option>`)))})}},l={mainNav:document.querySelector(t.mainNav),menuItems:document.querySelectorAll(t.mainNavSelector),removeUnnecessaryItemsFromNav:function(){this.menuItems.forEach(e=>{document.getElementById(e.textContent.trim().toLowerCase())===null&&document.getElementById(e.textContent.trim().toUpperCase())===null&&e.remove()})},makeNavSticky:function(){const e=this.mainNav.offsetTop-this.mainNav.offsetHeight;window.addEventListener("scroll",()=>{window.scrollY>=e?document.querySelector(t.mainNav).classList.add("main-nav--sticky"):document.querySelector(t.mainNav).classList.remove("main-nav--sticky")})},init(){this.removeUnnecessaryItemsFromNav(),this.makeNavSticky()}};a.init();d.init();l.init();
